<div class="header">
  <div class="title-container">
    <div class="title">RAILWAY</div>
    <div class="clock">{{ currentTime | date:'HH:mm:ss' }}</div>
  </div>
  <div class="controls">
    <button class="service-history" (click)="toggleSidebar()">SERVICE HISTORY</button>
    <button class="simulation-btn" (click)="startSimulation()">Start</button>
    <button class="simulation-btn" (click)="stopSimulation()">Stop</button>
  </div>
  <div class="settings" (click)="goToSettings()">
    <img src="/assets/images/settings.png" alt="Settings" class="settings-icon"/>
  </div>
</div>

<div 
  class="sidebar" 
  [ngClass]="{'open': isSidebarOpen}" 
  *ngIf="isSidebarOpen">
  <h2>Клієнти</h2>
  <ul>
    <li *ngFor="let client of loggedClients">
      <img src="/assets/images/user.png" alt="user-icon" class="user-icon">
      <div class="client-name">
        <span class="first-name">{{ client.firstName }}</span>
        <span class="last-name">{{ client.lastName }}</span>
      </div>
      <div class="client-id">
        <span class="client-id-number">{{ client.clientID }}</span>
      </div>
      <div class="client-ticket-office">
        <img src="/assets/images/ticket.png" alt="ticket-office-icon" class="ticket-office-icon">
        <span class="client-ticket-office-number">{{ client.ticketOfficeId }}</span>
      </div>
      <div class="client-time-info"> 
        <span class="start-time">{{ client.startTime | date:'HH:mm:ss' || 'N/A' }}</span>
        <span class="end-time">{{ client.endTime | date:'HH:mm:ss' || 'N/A' }}</span>
      </div>
    </li>
  </ul>
</div>

<div class="stats">
  <span class="stat">POST OFFICES: <strong>{{cashDesks.length}}</strong></span>
  <span class="stat">ENTRANCES: <strong>{{entrances.length}}</strong></span>
  <span class="stat">CLIENTS: <strong>{{clients.length}}</strong></span>
</div>


<div class="station-container" #stationContainer>
  <div *ngFor="let client of clients"
       [ngClass]="getPrivilegeLabel(client.privilege)"
       class="marker person"
       [style.top.px]="client.position.x * cellSize"
       [style.left.px]="client.position.y * cellSize">
  </div>

  <div *ngFor="let entrance of entrances"
       class="marker entrance"
       [style.top.px]="entrance.position.x * cellSize"
       [style.left.px]="entrance.position.y * cellSize">

  </div>

  <div *ngFor="let cashDesk of cashDesks"
       class="marker cash-desk"
       [ngClass]="{'cash-desk-disabled': cashDesk.isReserve, 'cash-desk': !cashDesk.isReserve}"
       [style.top.px]="cashDesk.position.x * cellSize"
       [style.left.px]="cashDesk.position.y * cellSize">
  </div>
</div>
